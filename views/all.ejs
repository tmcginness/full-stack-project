<!DOCTYPE html>
<html lang="en">

<head>

    <%- include('./partials/head'); %>
        <title>All Transactions</title>
</head>

<body>
    <div class="container-md">
        <% let portfolioBalance = 0 %>

            <% for (let i = 0; i < transactions.length; i++) { %>
                <% portfolioBalance += Number(transactions[i].value) %>
                    <% } %>

                        <div class="mb-5 mt-3 text-center">
                            <h1 class="display-4 balance">
                                Portfolio Balance:$
                                <%=portfolioBalance%>
                            </h1>
                        </div>
                        <div class="text-center">
                            <a class="btn mt-3 btn-dark" href="/">Return to Dashboard</a>
                            <a class="btn mt-3 btn-dark" href="/new">Add a new transaction!</a>
                        </div>


                        <div class="mt-5 row">
                            <div class="table-responsive">
                                <table class="table table-striped text-center w-100">
                                    <thead>
                                        <tr>
                                            <th scope="col">Coin</th>
                                            <th scope="col">Amount</th>
                                            <th scope="col">Date</th>
                                            <th scope="col">Value</th>
                                            <th scope="col">Type</th>
                                        </tr>
                                    </thead>
                                    <% for (let i = 0; i < transactions.length; i++){%>

                                        <tr class="border">
                                            <td>

                                                <%=transactions[i].coin; %>

                                            </td>
                                            <td>
                                                <%=transactions[i].amount; %>
                                            </td>
                                            <td>
                                                <%=transactions[i].date; %>
                                            </td>
                                            <td>
                                                $
                                                <%=transactions[i].value; %>
                                            </td>
                                            <td>
                                                <%=transactions[i].transactionType; %>
                                            </td>
                                            <td>
                                                <a class="w-100 btn btn-dark" href="<%=transactions[i].id; %>">View</a>
                                            </td>
                                            <td>
                                                <a class="w-100 btn btn-dark" href="/<%=transactions[i].id%>/edit">Edit</a>
                                            </td>
                                            <td>
                                                <form action="/<%=transactions[i].id; %>?_method=DELETE" method="POST">
                                                    <input class=" w-100 btn btn-dark" type="submit" value="DELETE">
                                                </form>

                                            </td>
                                        </tr>


                                        <% } %>
                                </table>
                            </div>
                        </div>
    </div>

</body>


</html>